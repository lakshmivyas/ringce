{% extends "base.j2" %}
{% block css %}
<link rel="stylesheet" href="{{ media_url('css/slammer.css') }}" type="text/css">
<link rel="stylesheet" href="{{ media_url('css/fancybox.css') }}" type="text/css">
{% endblock %}

{% macro fancybox(tname, fname, caption, class, pclass, rel) %}
<p class="{{ pclass }}">
<a href="{{ fname }}" title="{{ caption }}" {% if rel -%}rel="{{ rel }}"{%- endif %}><img src="{{ tname }}" class="{{ class }}" alt="{{ caption }}"></a>
</p>
{% endmacro %}


{% macro lb(name, caption, class) %}
{% set basepath = 'http://ringce.com/media/art/shots/' %}
{% set tname = basepath~'t-'~name~'.png' %}
{% set fname = basepath~name~'.png' %}
{{ fancybox(tname, fname, caption, class, 'pop') }}
{% endmacro %}

{% block main %}
<div id="pane">
    <header id="banner">
        <hgroup>
            <h1>Slammer</h1>
            <h2>Any grid you want, anywhere you want</h2>
        </hgroup>
        <div id="download-buy">
            <a class="buy button" href="{{slammer.buy}}">
                <span class="buy-btn">Buy</span>
                <span class="price">$20</span>
                <br class="clear"/>
            </a>
            <a class="download button" href="{{slammer.download}}">
                <span class="dld-btn">Download</span>
                <span class="version">v1.1</span>
                <br class="clear"/>
            </a>
            <span class="slreq">Requires Snow Leopard</span>
            <br class="clear"/>
        </div>
        <br class="clear"/>
    </header>
    <article class="clearfix">
    {% filter markdown|typogrify -%}
    {% block copy -%}{%- endblock %}
    {%- endfilter %}
    </article>
    <aside>
        <h3>Resources</h3>
        <ul class="resources">
            <li id="screenshots">
                <figure class="screenshots">
                    <figcaption>Screenshots</figcaption>
                    <ul id="slideshow">
                        {% for image in slammer_shots %}
                        <li>
                        {{ fancybox(
                            slammer_shot_root~'/thumb/th_'~loop.index~'-'~image.name~'.jpg',
                            slammer_shot_root~'/'~loop.index~'-'~image.name~'.png',
                            image.description,
                            'slammer-shot',
                            'slammer-shots',
                            'slammer-shots'
                            )}}
                        </li>
                        {% endfor %}
                    </ul>
                </figure>
            </li>
            <li id="videos">
                <figure class="videos">
                    <figcaption>Video</figcaption>
                    <a href="{{ content_url('slammer/movie') }}" class="video_thumbnail"></a>
                </figure>
            </li>
            <li>
                <figure class="jSlammer">
                    <figcaption>Javascript Grids</figcaption>
                    <a href="{{ content_url('jSlammer') }}" class="bigtext">jSlammer</a>
                </figure>
            </li>
            <li>
                <figure class="documents">
                    <figcaption>Documents</figcaption>
                    <a class="bigtext" href="{{ media_url('data/userguide') }}">User Guide</a>
                    <a class="bigtext" href="{{ media_url('data/presskit') }}">Press Kit</a>
                </figure>
            </li>
        </ul>
        <hr>
    </aside>
    <aside>
        <div class="tweet"></div>
        <a class="ringce-home" href="{{ content_url('/') }}" title="Ringce Home">
            <img src="{{ media_url('images/art/ringce-logo-128.png') }}">
        </a>
        <br class="clear"/>
    </aside>
</div>
<br class="clear"/>
<footer>
    <small class="colophon">{% includetext "blurbs/footnote.md" %}</small>
</footer>
{% endblock %}

{% block endjs %}

{{ super() }}

<script type="text/javascript">

head('jquery', function(){

    head.js({fancy: "{{ media_url('js/fancybox.js') }}"});
        head.js({tweet: "{{ media_url('js/jquery.tweet.js') }}"});
        head('tweet', function(){
            $(".tweet").tweet({
                template: function(info){
                  return info["user"] + info["join"] + info["text"];
                },
                username:'slammerapp',
                count: 3,
                fav: true
            });
        });
        head("fancy", function(){
           $("p.pop a").fancybox();
           $(".slammer-shots a").fancybox();
        });


});

</script>

{% endblock %}